{"version":3,"sources":["webpack:///./src/components/signinform.js","webpack:///./src/pages/signin.js"],"names":["styleOutline","border","outline","headers","Authorization","create","name","form","useState","pwd","setType","username","setUsername","getFieldDecorator","getFieldsValue","setFields","setFieldsValue","handlePasswordSubmit","e","preventDefault","formData","user","password","console","log","axios","post","then","data","navigate","catch","err","response","fields","value","errors","Error","onSubmit","get","message","status","className","id","icon","style","float","onClick","href","type","theme","fontSize","borderRadius","width","height","marginTop","Item","rules","required","placeholder","onChange","target","to","htmlType","size"],"mappings":"8RAOMA,EAAe,CACnBC,OAAQ,IACRC,QAAS,QAILC,EAAU,CACdA,QAAS,CACP,eAAgB,mBAChBC,cAAc,iKA2KH,MAAKC,OAAO,CAAEC,KAAM,SAApB,EAvKI,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAAW,EACVC,oBAAS,GAAzBC,EAD0B,KACrBC,EADqB,OAEDF,mBAAS,IAAlCG,EAF0B,KAEhBC,EAFgB,KAIvBC,EAAiEN,EAAjEM,kBAAmBC,EAA8CP,EAA9CO,eAAgCC,GAAcR,EAA9BS,eAA8BT,EAAdQ,WA0BrDE,EAAuB,SAAAC,GAC3BA,EAAEC,iBACF,IAAMC,EAAWN,IACXO,EAAO,CACXV,SAAUA,EACVW,SAAUF,EAASE,UAErBC,QAAQC,IAAIH,GACZI,IACGC,KADH,sBAC+BL,EAAMlB,GAClCwB,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACPL,QAAQC,IAAII,GACZC,mBAAS,mBAEVC,OAAM,SAAAC,GACLR,QAAQC,IAAIO,EAAIC,UAChB,IAAMC,EAAS,CACbX,SAAU,CACRY,MAAOb,EAAKC,SACZa,OAAQ,CAAC,IAAIC,MAAM,yBAGvBrB,EAAUkB,OAWhB,OACE,uBACEI,SAAU5B,EAAMQ,EA3DS,SAAAC,GAC3BA,EAAEC,iBACF,IAAME,EAAOP,IACbW,IACGa,IADH,iBACwBjB,EAAKV,SAAYR,GACtCwB,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACPlB,GAAQ,GACRE,EAAYS,EAAKV,UACjBY,QAAQC,IAAII,MAEbE,OAAM,YAAwB,IAAXC,EAAU,EAApBC,SACRT,QAAQC,IAAIO,GACZ,IAAMQ,EAAWlB,EAAKV,SAEH,MAAfoB,EAAIS,OACJ,0BACAT,EAAIH,KAAKW,QAHT,8BAIEN,EAAS,CACbtB,SAAU,CAAEuB,MAAOb,EAAKV,SAAUwB,OAAQ,CAAC,IAAIC,MAAMG,MAEvDxB,EAAUkB,OAwCZQ,UAAU,cAEV,wBAAIC,GAAG,SAAP,WACA,6BACGjC,GACC,uBACEkC,KAAK,aACLC,MAAO,CAAE3C,OAAQ,EAAG4C,MAAO,QAC3BC,QAAS,WACPpC,GAAQ,MAIbD,EACC,yBAAKgC,UAAU,cACb,8BAAO9B,IAGT,yBAAK8B,UAAU,SACb,uBAAGM,KAAK,kDACN,uBACEC,KAAK,gBACLC,MAAM,SACNL,MAAO,CAAEM,SAAU,OAAQC,aAAc,UAG7C,uBAAGJ,KAAK,8CACN,kBAAC,IAAD,CAAcH,MAAO,CAAEQ,MAAO,GAAIC,OAAQ,GAAIC,UAAW,MAE3D,uBAAGP,KAAK,+BACN,uBACEC,KAAK,WACLC,MAAM,SACNL,MAAO,CAAEM,SAAU,OAAQC,aAAc,WAKhD1C,GACC,uBACEkC,KAAK,cACLC,MAAO,CAAE3C,OAAQ,EAAG4C,MAAO,SAC3BC,QAAS7B,KAIdR,EACC,sBAAM8C,KAAN,KACG1C,EAAkB,WAAY,CAC7B2C,MAAO,CAAC,CAAEC,UAAU,EAAMlB,QAAS,iCADpC1B,CAGC,uBACEmC,KAAK,WACLU,YAAY,WACZd,MAAO5C,MAKb,sBAAMuD,KAAN,KACG1C,EAAkB,WAAY,CAC7B2C,MAAO,CAAC,CAAEC,UAAU,EAAMlB,QAAS,iCADpC1B,CAGC,uBACE6C,YAAY,WACZd,MAAO5C,EACP2D,SA3EiB,SAAAzC,GAC3BA,EAAEC,iBACFI,QAAQC,IAAIb,GACZC,EAAYM,EAAE0C,OAAO1B,YA6EnB,sBAAMqB,KAAN,KACG9C,EACC,uBACEgC,UAAU,oBACVK,QAAS,WACPrB,IACGa,IADH,+BACsC3B,GACnCgB,MAAK,YAAe,IAAZC,EAAW,EAAXA,KACPL,QAAQC,IAAII,MAEbE,OAAM,YAAwB,IAAXC,EAAU,EAApBC,SACRT,QAAQC,IAAIO,QATpB,qBAgBA,kBAAC,OAAD,CAAMU,UAAU,oBAAoBoB,GAAG,WAAvC,aAIF,uBAAQb,KAAK,UAAUc,SAAS,SAASrB,UAAU,qBAChDhC,EAAM,UAAY,a,YC/Kd,qBACd,OACC,yBAAKgC,UAAU,mBACd,yBAAKA,UAAU,cACd,kBAAC,IAAD,CAAMA,UAAU,MAAMsB,KAAK,WAC3B,yBAAKtB,UAAU,iBACd,kBAAC,EAAD","file":"component---src-pages-signin-js-9ba51c9aa5960904e733.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./forms.css\";\nimport { Form, Input, Button, Icon } from \"antd\";\nimport { FortyTwoIcon } from \"../icons\";\nimport { Link, navigate } from \"gatsby\";\nimport axios from \"axios\";\n\nconst styleOutline = {\n  border: \"0\",\n  outline: \"none\",\n};\nconst token =\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZTUxOGY3ZTZkNGE0ZjAwODFlZmUyNmMiLCJpYXQiOjE1ODI0MDM0NjJ9.SB_f4GDR9v41ntSeVs9pizRXTIr5ku4LRpWgthALb9A\";\nconst headers = {\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Authorization: `Bearer ${token}`,\n  },\n};\n\nconst SignInForm = ({ form }) => {\n  let [pwd, setType] = useState(false);\n  let [username, setUsername] = useState(\"\");\n\n  const { getFieldDecorator, getFieldsValue, setFieldsValue, setFields } = form;\n\n  const handleUsernameSubmit = e => {\n    e.preventDefault();\n    const user = getFieldsValue();\n    axios\n      .get(`/api/v1/users/${user.username}`, headers)\n      .then(({ data }) => {\n        setType(true);\n        setUsername(user.username);\n        console.log(data);\n      })\n      .catch(({ response: err }) => {\n        console.log(err);\n        const message = !user.username\n          ? \"Please enter your Username!\"\n          : err.status === 404\n          ? \"Username not registered\"\n          : err.data.message;\n        const fields = {\n          username: { value: user.username, errors: [new Error(message)] },\n        };\n        setFields(fields);\n      });\n  };\n\n  const handlePasswordSubmit = e => {\n    e.preventDefault();\n    const formData = getFieldsValue();\n    const user = {\n      username: username,\n      password: formData.password,\n    };\n    console.log(user);\n    axios\n      .post(`/api/v1/users/login`, user, headers)\n      .then(({ data }) => {\n        console.log(data);\n        navigate(`/app/library`);\n      })\n      .catch(err => {\n        console.log(err.response);\n        const fields = {\n          password: {\n            value: user.password,\n            errors: [new Error(\"Incorrect Password\")],\n          },\n        };\n        setFields(fields);\n      });\n    // setType(false);\n  };\n\n  const handleUsernameChange = e => {\n    e.preventDefault();\n    console.log(username);\n    setUsername(e.target.value);\n  };\n\n  return (\n    <Form\n      onSubmit={pwd ? handlePasswordSubmit : handleUsernameSubmit}\n      className=\"login-form\"\n    >\n      <h2 id=\"my-h2\">SIGN IN</h2>\n      <div>\n        {pwd && (\n          <Button\n            icon=\"caret-left\"\n            style={{ border: 0, float: \"left\" }}\n            onClick={() => {\n              setType(false);\n            }}\n          />\n        )}\n        {pwd ? (\n          <div className=\"user-badge\">\n            <span>{username}</span>\n          </div>\n        ) : (\n          <div className=\"empty\">\n            <a href=\"http://localhost:3000/api/v1/users/auth/google\">\n              <Icon\n                type=\"google-square\"\n                theme=\"filled\"\n                style={{ fontSize: \"21px\", borderRadius: \"4px\" }}\n              />\n            </a>\n            <a href=\"http://localhost:3000/api/v1/users/auth/42\">\n              <FortyTwoIcon style={{ width: 19, height: 19, marginTop: 1 }} />\n            </a>\n            <a href=\"/api/v1/users/auth/facebook\">\n              <Icon\n                type=\"facebook\"\n                theme=\"filled\"\n                style={{ fontSize: \"21px\", borderRadius: \"4px\" }}\n              />\n            </a>\n          </div>\n        )}\n        {pwd && (\n          <Button\n            icon=\"caret-right\"\n            style={{ border: 0, float: \"right\" }}\n            onClick={handlePasswordSubmit}\n          />\n        )}\n      </div>\n      {pwd ? (\n        <Form.Item>\n          {getFieldDecorator(\"password\", {\n            rules: [{ required: true, message: \"Please enter your Password!\" }],\n          })(\n            <Input\n              type=\"password\"\n              placeholder=\"Password\"\n              style={styleOutline}\n            />\n          )}\n        </Form.Item>\n      ) : (\n        <Form.Item>\n          {getFieldDecorator(\"username\", {\n            rules: [{ required: true, message: \"Please enter your Username!\" }],\n          })(\n            <Input\n              placeholder=\"Username\"\n              style={styleOutline}\n              onChange={handleUsernameChange}\n            />\n          )}\n        </Form.Item>\n      )}\n      <Form.Item>\n        {pwd ? (\n          <a\n            className=\"login-form-forgot\"\n            onClick={() => {\n              axios\n                .get(`/api/v1/users/resetpassword/${username}`)\n                .then(({ data }) => {\n                  console.log(data);\n                })\n                .catch(({ response: err }) => {\n                  console.log(err);\n                });\n            }}\n          >\n            Forgot Password ?\n          </a>\n        ) : (\n          <Link className=\"login-form-forgot\" to=\"/signup\">\n            Sign Up ?\n          </Link>\n        )}\n        <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n          {pwd ? \"SIGN IN\" : \"NEXT\"}\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default Form.create({ name: \"login\" })(SignInForm);\n","import React from \"react\"\nimport \"./formslayout.css\";\nimport SignInForm from \"../components/signinform\"\nimport Logo from \"../components/image\";\n\nexport default () => {\n\treturn (\n\t\t<div className=\"form-background\">\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<Logo className=\"img\" size=\"Medium\" />\n\t\t\t\t<div className=\"form-controls\">\n\t\t\t\t\t<SignInForm />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"sourceRoot":""}